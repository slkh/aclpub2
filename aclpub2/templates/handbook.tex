\PassOptionsToPackage{latin,english}{babel}
\documentclass[twoside,makeidx]{book}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{xspace}
\usepackage{subcaption}
\usepackage{combelow}
\usepackage{newunicodechar}
\usepackage{upgreek}
\usepackage{afterpage}
\usepackage{eurosym}
\usepackage{tabu}
\usepackage{wrapfig}
\usepackage{tikz}
\usepackage{arabtex}
\usepackage{enumitem}
\usepackage{pdfpages}
\newunicodechar{ș}{\cb{s}}
\newunicodechar{ț}{\cb{t}}

%% \usepackage{fontspec,xunicode,xltxtra}
%% \setromanfont[Mapping=tex-text]{Times}
%% \setsansfont[Mapping=tex-text]{Lucida Grande}.
%% \setmonofont{Courier New}


% set paper size and margins; needs to be adapted for A5 ideally, we
% should have a document class for conference handbooks where A5
% vs. letter-halved is a class option
\usepackage[
  paperheight=210mm,
  paperwidth=148mm,
  footskip=.57in,
  inner=.7in,
  outer=.45in,
  bottom=.92in,
  top=.7in,
  twoside]{geometry}


\usetikzlibrary[positioning]
\usetikzlibrary{patterns}
\newcounter{dummy} % hack, see content/maps.tex, not sure if it works though

% Lots of macros
\input{\VAR{build_dir}/content/special/preamble}
\input{\VAR{build_dir}/content/special/macros}

\input{\VAR{build_dir}/content/setup/venues}    % macros for event locations
\input{\VAR{build_dir}/content/setup/sessions}  % session titles and venues

%\usepackage{fourier} % use modern font, not the ghastly 90s fonts plaguing most ACL style files

\renewcommand{\normalsize}{\fontsize{8}{9}\selectfont}
\renewcommand{\small}{\fontsize{7}{8}\selectfont}
\renewcommand{\footnotesize}{\fontsize{6}{6}\selectfont}
\renewcommand{\large}{\fontsize{10}{11}\selectfont}
\renewcommand{\Large}{\fontsize{12}{14}\selectfont}
\renewcommand{\huge}{\fontsize{14}{17}\selectfont}

% version of \cleardoublepage to ensure we use an even page
% standard \cleardoublepage will ensure odd page
\makeatletter
\newcommand*\cleardoublepageEVEN{\clearpage\if@twoside
  \ifodd\c@page \hbox{}\newpage\if@twocolumn\hbox{}%
  \newpage\fi\fi\fi}
\makeatother

% for each part of the conference, add the .bib file produced with
% meta2bibtex.py here:


%TO BE UNCOMMENTED
%\bibliography{auto/tacl/papers.bib}
%
%
%
%\bibliography{auto/BioNLP/papers.bib}
%\bibliography{auto/CALCS/papers.bib}
%\bibliography{auto/CogCL/papers.bib}
%\bibliography{auto/DLNLPLR/papers.bib}
%\bibliography{auto/ECONLP/papers.bib}
%\bibliography{auto/MML_Challenge/papers.bib}
%\bibliography{auto/MRQA/papers.bib}
%\bibliography{auto/MSR/papers.bib}
%\bibliography{auto/NEWS/papers.bib}
%\bibliography{auto/NLPOSS/papers.bib}
%\bibliography{auto/NLPTEA/papers.bib}
%\bibliography{auto/NMT/papers.bib}
%\bibliography{auto/RELNLP/papers.bib}
%\bibliography{auto/RepL4NLP/papers.bib}
%\bibliography{auto/SocialNLP/papers.bib}
%\bibliography{auto/demos/papers.bib}
%\bibliography{auto/papers/papers.bib}
%\bibliography{auto/srw/papers.bib}
\bibliography{auto/tutorial/papers.bib}
%
%% Special bib for the workshops
%\bibliography{content/workshops/papers.bib}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% General use jinja macros.
% \BLOCK{macro committee_member(member)}\VAR{member.first_name} \BLOCK{if member.middle_name is defined}\VAR{member.middle_name} \BLOCK{endif}\VAR{member.last_name} \BLOCK{if member.institution is defined}, \VAR{member.institution}\BLOCK{endif}\BLOCK{endmacro}
\BLOCK{macro committee_member(member)}\VAR{member.first_name} \BLOCK{if member.middle_name is defined}\VAR{member.middle_name} \BLOCK{endif}\VAR{member.last_name}\BLOCK{if member.institution is defined}, \VAR{member.institution}\BLOCK{endif}\BLOCK{endmacro}

%%%%%%%%%%%%
% DOCUMENT %
%%%%%%%%%%%%
\begin{document}
\thispagestyle{empty}
\fancyfoot[C]{}
%%%%%%%%%%%%%%%%%
% Front Page %
%%%%%%%%%%%%%%%%%
\VAR{load_file(root, "front_page_handbook", "front_page.tex")}
\clearpage
\leavevmode\newpage

%%%%%%%
% TOC %
%%%%%%%
\fancyfoot[C]{\thepage}
\pagenumbering{roman}
\addcontentsline{toc}{chapter}{Table of Contents}
\setcounter{tocdepth}{2}
\tableofcontents
\pagestyle{fancy}

\chapter{Conference Information}
\pagenumbering{arabic}
\setheaders{}{}

%%%%%%%%%%%%
% Prefaces %
%%%%%%%%%%%%
\BLOCK{for preface in prefaces}
  \begin{flushleft}
  \section{\VAR{preface.title}}
  \end{flushleft}
  \vspace*{0.2cm}
  \VAR{load_file(root, "prefaces", preface.file)}
  % \newpage
  \clearpage
\BLOCK{endfor}
\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%
% Organizing Committee %
%%%%%%%%%%%%%%%%%%%%%%%%
\BLOCK{if organizing_committee}

{\section{Organizing Committee}}
\begin{description}
\BLOCK{for role in organizing_committee}
  \item{\bf \VAR{role.role}}\vspace{1mm}\\
  \BLOCK{for member in role.members}
    \VAR{committee_member(member)}\\
  \BLOCK{endfor}
\BLOCK{endfor}
\end{description}
\newpage
\BLOCK{endif}
\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Senior Program Committee %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\BLOCK{if senior_program_committee}

{\section{Senior Program Committee}}
\begin{description}
\BLOCK{for role in senior_program_committee}
  \item{\bf \VAR{role.role}}\vspace{1mm}\\
  \BLOCK{for member in role.members}
    \VAR{committee_member(member)}\\
  \BLOCK{endfor}
\BLOCK{endfor}
\end{description}
\newpage
\BLOCK{endif}
\clearpage
% %%%%%%%%%%%%%%%%%%%%%
% % Program Committee %
% %%%%%%%%%%%%%%%%%%%%%
% \BLOCK{if program_committee}

% \section{Program Committee}

% \begin{description}
% \BLOCK{for block in program_committee}
%   \item{\bf \VAR{block.role}}\vspace{1mm}\\
%   \BLOCK{if block.entries[0].area}
%     \BLOCK{for area in block.entries}
%       \emph{\VAR{area.area}}\\
%       \BLOCK{if area.members[0].institution}
%         \BLOCK{for member in area.members}
%           \VAR{committee_member(member)}\\
%         \BLOCK{endfor}
%       \BLOCK{endif}
%       \BLOCK{if not area.members[0].institution}
%         \VAR{join_names_commitee(", ", area.members)}\\
%       \BLOCK{endif}
%     \BLOCK{endfor}
%   \BLOCK{elif block.type is equalto("name_block")}
%     \BLOCK{for name_block in group_by_last_name(block.entries)}
%       \VAR{join_names_commitee(", ", name_block)}\\
%       \newline
%     \BLOCK{endfor}
%   \BLOCK{elif block.type is equalto("name_block_without_newlines")}
%     \VAR{to_string_sorting_by_last_name(block.entries)}\\
%     \newline
%   \BLOCK{else}
%     \BLOCK{for member in block.entries}
%       \VAR{committee_member(member)}\\
%     \BLOCK{endfor}
%   \BLOCK{endif}

% \BLOCK{endfor}
% \end{description}
% \newpage
% \BLOCK{endif}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Conference Organizers & Vendors %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \setheaders{Conference Organizers \& Vendors }{Conference Organizers \& Vendors }
\section{Conference Organizers \& Vendors}
\VAR{load_file(root, "conference_organizers", "organizers_and_vendors.tex")}
\clearpage
% \BLOCK{if conference_organizers}

% {\section{Conference Organizers and Vendors}}
% \begin{description}
% \BLOCK{for role in conference_organizers}
%   \item{\bf \VAR{role.role}}\vspace{1mm}\\
%   \BLOCK{for member in role.members}
%     \VAR{committee_member(member)}\\
%   \BLOCK{endfor}
% \BLOCK{endfor}
% \end{description}
% \newpage
% \BLOCK{endif}



%%%%%%%%%%%
% Policy %
%%%%%%%%%%%
\setheaders{Diversity, Inclusion, and Anti-Harassment Policy}{Diversity, Inclusion, and Anti-Harassment Policy}
\chapter{Diversity, Inclusion, and Anti-Harassment Policy}
\VAR{load_file(root, "harassment", "harassment.tex")}
\clearpage

%%%%%%%%%%%
% Meal_Info %
%%%%%%%%%%%
\setheaders{Meal Info}{Meal Info}
\VAR{load_file(root, "meal", "meal.tex")}
\clearpage

%%%%%%%%%%%
% Welcome Reception
%%%%%%%%%%%
\setheaders{Welcome Reception}{Welcome Reception}
\chapter{Welcome Reception}
\VAR{load_file(root, "welcome_reception", "welcome_reception.tex")}
\clearpage

%%%%%%%%%%%
% Social Event
%%%%%%%%%%%
\setheaders{Social Events -- Offsite Excursion}{Social Events -- Offsite Excursion}
\chapter{Social Events -- Offsite Excursion}
\VAR{load_file(root, "social_event", "social_event.tex")}
\clearpage

%%%%%%%%%%%%
% Invited Talks %
%%%%%%%%%%%%
\setheaders{Keynotes}{Keynotes}
\BLOCK{if invited_talks}
\chapter{Keynotes}
\BLOCK{for talk in invited_talks}
  \VAR{load_file(root, "invited_talks", talk.abstract_file)}
\BLOCK{endfor}
\BLOCK{endif}
\clearpage
%%%%%%%%%%%%
% Birds-of-a-Feather Group Discussions %
%%%%%%%%%%%%
\setheaders{Birds-of-a-Feather Group Discussions}{Birds-of-a-Feather Group Discussions}
\chapter{Birds-of-a-Feather Group Discussions}
\VAR{load_file(root, "bof", "bof.tex")}
\clearpage
% %%%%%%%%%%%
% % Program %
% %%%%%%%%%%%
% \setheaders{Main Conference}{Main Conference}
% \chapter{Main Conference}
% \clearpage


%%%%%%%%%%%
% Conference Overview %
%%%%%%%%%%%
\setheaders{Conference Overview}{Conference Overview}
\VAR{load_file(root, "program", "program.tex")}
\clearpage
%%%%%%%%%%%
% Tutorial %
%%%%%%%%%%%
\setheaders{Tutorials Overview}{Tutorials Overview}
\VAR{load_file(root, "tutorials", "tutorials.tex")}
\clearpage
%%%%%%%%%%%%
% Tutorial Details %
%%%%%%%%%%%%0
\setheaders{Tutorials Details}{Tutorials Details}
\VAR{load_file(root, "tutorials", "tutorials_details.tex")}
\clearpage

%%%%%%%%%%%
% Workshops %
%%%%%%%%%%%
\setheaders{Workshops Overview}{Workshops Overview}
\VAR{load_file(root, "workshops", "workshops.tex")}
\clearpage

%%%%%%%%%%%%%%%%%%%%
% Workshop Details %
%%%%%%%%%%%%%%%%%%%%
\setheaders{Workshops Details}{Workshops Details}
\VAR{load_file(root, "workshops", "workshop_details.tex")}
\clearpage

%%%%%%%%%%%
% Local Guide %
%%%%%%%%%%%
\setheaders{Local Guide}{Local Guide}
\normalsize
\chapter{Local Guide}
\VAR{load_file(root, "local_guide", "local_guide.tex")}
\clearpage

%%%%%%%%%%%
% Venue Map %
%%%%%%%%%%%
\setheaders{Venue Map}{Venue Map}
\chapter{Venue Map}
\VAR{load_file(root, "venue_map", "venue_map.tex")}
\clearpage

%%%%%%%%%%%%%%%%
% Author Index %
%%%%%%%%%%%%%%%%
\cleardoublepage
\addcontentsline{toc}{chapter}{Author Index}
\setheaders{Author Index}{Author Index}
\printindex
\clearpage

%%%%%%%%%%%%%%
% Appendices %
%%%%%%%%%%%%%%
\cleardoublepage
\addcontentsline{toc}{chapter}{Sponsorship}
\setheaders{Sponsorship}{Sponsorship}
\VAR{load_file(root, "sponsorship", "sponsorship.tex")}
\clearpage

%%%%%%%%%%%%%%
% Back Cover %
%%%%%%%%%%%%%%
\thispagestyle{empty}
\noindent
\setheaders{}{}


\end{document}
